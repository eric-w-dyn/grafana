name: Detect breaking changes

on: push

jobs:
  build:
    name: Build packages
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Setup Node.js
      uses: actions/setup-node@v2
      with:
        node-version: 16
        registry-url: https://registry.npmjs.org/

    - name: Setup yarn
      run: npm install -g yarn

    - name: Yarn install
      run: yarn install --immutable

    - name: Build packages
      run: yarn packages:build 

    - name: Detect breaking changes
      run: ./scripts/check-breaking-changes.sh 

